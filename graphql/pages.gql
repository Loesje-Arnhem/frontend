fragment PageBase on Page {
  id
  databaseId
  title
}

fragment RelatedPage on Page {
  ...PageBase
  excerpt
  uri
}

fragment RelatedPageNode on PageToPageConnectionEdge {
  node {
    ...RelatedPage
  }
}

fragment RelatedPages on PageToPageConnection {
  edges {
    ...RelatedPageNode
  }
}

fragment SimpleProduct on SimpleProduct {
  regularPrice
  price
  salePrice
  featuredImage {
    ...FeaturedImage
  }
}

fragment VariableProduct on VariableProduct {
  regularPrice
  price
  salePrice
  featuredImage {
    ...FeaturedImage
  }
}

fragment Product on Product {
  ... on SimpleProduct {
      slug
      id
      databaseId
      title: name
      ...SimpleProduct
    }
    ... on VariableProduct {
      slug
      id
      databaseId
      title: name
      ...VariableProduct
    }
}

fragment RelatedProduct on Product {
  product {
    ...Product
  }
}


fragment RelatedProducts on Page_Relatedproductsgroup {
  title: relatedProductsTitle
  products: relatedProductsProducts {
    ... on Page_Relatedproductsgroup_relatedProductsProducts {
      ...RelatedProduct
    }
  }
}

fragment PageDetails on Page {
  ...PageBase
  content
  videoGroup {
    youtubeId
  }
  relatedPages {
    ...RelatedPages
  }
  relatedPostersGroup {
    title: relatedPostersTitle
  }
  relatedPosters(first: 7) {
    ...RelatedPosters
  }
  relatedProducts: relatedProductsGroup {
    ...RelatedProducts
  }  
}

query GetPageByUri($uri: ID!) {
  page(id: $uri, idType: URI) {
    ...PageDetails
  }
}

query GetPageByID($id: ID!) {
  page(id: $id, idType: DATABASE_ID) {
    ...PageDetails
  }
}

query GetPageHome($id: ID!) {
  page(id: $id, idType: DATABASE_ID) {
    ...PageDetails
  }
  posts(first: 3, where: {
    hasPassword: false
  }) {
    ...PostListItems
  }
}